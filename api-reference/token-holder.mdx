---
title: 'Token Holder API'
description: '토큰 보유자 잔액 및 파티션 조회'
---

# Token Holder API

Token Holder API는 특정 지갑 주소의 토큰 잔액 및 파티션별 보유 현황을 조회합니다.

---

## 잔액 조회

특정 주소의 토큰 총 보유량을 조회합니다.

### Request

```bash
GET /main/v1/holders/{holder}/tokens/{tokenSymbol}/balance
```

<ParamField path="holder" type="string" required>
  지갑 주소 (예: `0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7`)
</ParamField>

<ParamField path="tokenSymbol" type="string" required>
  토큰 심볼 (DT 토큰일 경우 `DT`)
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/holders/0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7/tokens/PULSE-ST-001/balance" \
  -H "Authorization: Bearer {access_token}"
```

```javascript JavaScript
const holder = '0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7';
const response = await fetch(
  `https://api.stopulse.co.kr/main/v1/holders/${holder}/tokens/PULSE-ST-001/balance`,
  {
    headers: { 'Authorization': 'Bearer {access_token}' }
  }
);
const balance = await response.json();
console.log('잔액:', balance);
```

```python Python
import requests

holder = "0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7"
url = f"https://api.stopulse.co.kr/main/v1/holders/{holder}/tokens/PULSE-ST-001/balance"
headers = {"Authorization": "Bearer {access_token}"}

response = requests.get(url, headers=headers)
print("잔액:", response.json())
```

</CodeGroup>

### Response

```json 200
"1000"
```

<Note>
  응답은 문자열 형태의 숫자입니다. 모든 파티션의 합계입니다.
</Note>

---

## 보유자 파티션 목록 조회

특정 주소가 보유한 토큰의 파티션 목록을 조회합니다.

### Request

```bash
GET /main/v1/holders/{holder}/tokens/{tokenSymbol}/partitions
```

### Example

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/holders/0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7/tokens/PULSE-ST-001/partitions" \
  -H "Authorization: Bearer {access_token}"
```

### Response

```json 200
{
  "partitions": [
    {
      "name": "초기",
      "partition": "0x0000000000000000000000000000000000000000000000000000000000000001"
    },
    {
      "name": "락업",
      "partition": "0x0000000000000000000000000000000000000000000000000000000000000002"
    }
  ]
}
```

---

## 파티션별 잔액 조회

특정 파티션의 토큰 잔액을 조회합니다.

### Request

```bash
GET /main/v1/holders/{holder}/tokens/{tokenSymbol}/partitions/{partition}/balance
```

<ParamField path="holder" type="string" required>
  지갑 주소
</ParamField>

<ParamField path="tokenSymbol" type="string" required>
  토큰 심볼
</ParamField>

<ParamField path="partition" type="string" required>
  파티션 ID (32바이트 hex 문자열)
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/holders/0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7/tokens/PULSE-ST-001/partitions/0x0000000000000000000000000000000000000000000000000000000000000001/balance" \
  -H "Authorization: Bearer {access_token}"
```

```javascript JavaScript
const holder = '0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7';
const partition = '0x0000000000000000000000000000000000000000000000000000000000000001';
const response = await fetch(
  `https://api.stopulse.co.kr/main/v1/holders/${holder}/tokens/PULSE-ST-001/partitions/${partition}/balance`,
  {
    headers: { 'Authorization': 'Bearer {access_token}' }
  }
);
const balance = await response.json();
```

</CodeGroup>

### Response

```json 200
"800"
```

---

## 파티션별 잠금 잔액 조회

특정 파티션에서 잠금 처리된 토큰 잔액을 조회합니다.

### Request

```bash
GET /main/v1/holders/{holder}/tokens/{tokenSymbol}/partitions/{partition}/locked/balance
```

### Example

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/holders/0xAdb6Dc93FF5d5d93998e1643A03048C5437B08B7/tokens/PULSE-ST-001/partitions/0x0000000000000000000000000000000000000000000000000000000000000001/locked/balance" \
  -H "Authorization: Bearer {access_token}"
```

### Response

```json 200
"200"
```

<Note>
  잠금 잔액은 전송 가능 잔액에서 제외됩니다.

  **전송 가능 잔액** = 파티션 잔액 - 잠금 잔액
</Note>

---

## 잔액 계산 예시

```javascript
async function getAvailableBalance(holder, token, partition) {
  // 파티션 잔액 조회
  const totalBalance = await fetch(
    `https://api.stopulse.co.kr/main/v1/holders/${holder}/tokens/${token}/partitions/${partition}/balance`,
    { headers: { 'Authorization': `Bearer ${accessToken}` } }
  ).then(r => r.json());

  // 잠금 잔액 조회
  const lockedBalance = await fetch(
    `https://api.stopulse.co.kr/main/v1/holders/${holder}/tokens/${token}/partitions/${partition}/locked/balance`,
    { headers: { 'Authorization': `Bearer ${accessToken}` } }
  ).then(r => r.json());

  // 전송 가능 잔액 계산
  const availableBalance = BigInt(totalBalance) - BigInt(lockedBalance);

  return {
    total: totalBalance,
    locked: lockedBalance,
    available: availableBalance.toString()
  };
}
```

---

## 에러 응답

| HTTP Status | 에러 코드 | 설명 |
|-------------|----------|------|
| 400 | `INVALID_ADDRESS` | 유효하지 않은 지갑 주소 |
| 400 | `INVALID_PARTITION` | 유효하지 않은 파티션 ID |
| 404 | `TOKEN_NOT_FOUND` | 토큰이 존재하지 않음 |
| 404 | `HOLDER_NOT_FOUND` | 보유자를 찾을 수 없음 |
