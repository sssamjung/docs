---
title: 'Transfer API'
description: '토큰 전송 및 전송 가능 여부 확인'
---

# Transfer API

Transfer API는 토큰 전송 기능을 제공합니다. **Operator** 권한이 필요합니다.

<Note>
  모든 전송은 송신자와 수신자 모두 KYC 등록이 완료된 상태여야 합니다.
</Note>

## 전송 가능 여부 확인

토큰 전송이 가능한지 사전에 확인합니다. 실제 전송 전에 호출하여 오류를 방지할 수 있습니다.

### Request

```bash
POST /main/v1/tokens/{token}/transfer/check
```

### Body Parameters

<ParamField body="partition" type="string">
  파티션 ID (선택, 기본 파티션 사용 시 생략)
</ParamField>

<ParamField body="from" type="string" required>
  송신자 지갑 주소
</ParamField>

<ParamField body="to" type="string" required>
  수신자 지갑 주소
</ParamField>

<ParamField body="value" type="string" required>
  전송 수량
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X POST "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer/check" \
  -H "Authorization: Bearer {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
    "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
    "value": "100"
  }'
```

```javascript JavaScript
const response = await fetch(
  'https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer/check',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer {access_token}',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      from: '0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb',
      to: '0x734c49630caC28EaaC33e9722268e64cA80AbcFd',
      value: '100'
    })
  }
);

const result = await response.json();
if (result.transferable) {
  // 전송 진행
}
```

</CodeGroup>

### Response

<ResponseField name="transferable" type="boolean">
  전송 가능 여부
</ResponseField>

<ResponseField name="reason" type="string">
  전송 불가 시 사유 (선택)
</ResponseField>

```json 200
{
  "transferable": true,
  "token": "PULSE-ST-001",
  "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
  "value": "100"
}
```

전송 불가 시:

```json 200
{
  "transferable": false,
  "reason": "RECEIVER_NOT_KYC_REGISTERED",
  "token": "PULSE-ST-001",
  "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
  "value": "100"
}
```

---

## 토큰 전송

토큰을 다른 주소로 전송합니다.

### Request

```bash
POST /main/v1/tokens/{token}/transfer
```

### Body Parameters

<ParamField body="partition" type="string">
  파티션 ID (선택, 기본 파티션 사용 시 생략)
</ParamField>

<ParamField body="from" type="string" required>
  송신자 지갑 주소
</ParamField>

<ParamField body="to" type="string" required>
  수신자 지갑 주소
</ParamField>

<ParamField body="value" type="string" required>
  전송 수량
</ParamField>

<ParamField body="data" type="string">
  추가 데이터 (선택)
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X POST "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer" \
  -H "Authorization: Bearer {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
    "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
    "value": "100"
  }'
```

```javascript JavaScript
const response = await fetch(
  'https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer {access_token}',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      from: '0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb',
      to: '0x734c49630caC28EaaC33e9722268e64cA80AbcFd',
      value: '100'
    })
  }
);
```

```python Python
import requests

url = "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer"
headers = {
    "Authorization": "Bearer {access_token}",
    "Content-Type": "application/json"
}
data = {
    "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
    "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
    "value": "100"
}

response = requests.post(url, headers=headers, json=data)
```

</CodeGroup>

### Response

```json 200
{
  "transactionHash": "0xabc123...",
  "requestId": "req-123456",
  "token": "PULSE-ST-001",
  "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
  "value": "100"
}
```

---

## 파티션 간 전송

동일 소유자의 다른 파티션으로 토큰을 이동합니다.

### Request

```bash
POST /main/v1/tokens/{token}/transfer/partition
```

### Body Parameters

<ParamField body="holder" type="string" required>
  토큰 보유자 주소
</ParamField>

<ParamField body="fromPartition" type="string" required>
  출발 파티션 ID
</ParamField>

<ParamField body="toPartition" type="string" required>
  도착 파티션 ID
</ParamField>

<ParamField body="value" type="string" required>
  이동 수량
</ParamField>

### Example

```bash cURL
curl -X POST "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transfer/partition" \
  -H "Authorization: Bearer {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "holder": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
    "fromPartition": "0x0000...0001",
    "toPartition": "0x0000...0002",
    "value": "50"
  }'
```

### Response

```json 200
{
  "transactionHash": "0xdef456...",
  "requestId": "req-789012",
  "holder": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "fromPartition": "0x0000...0001",
  "toPartition": "0x0000...0002",
  "value": "50"
}
```

---

## 에러 응답

| HTTP Status | 에러 코드 | 설명 |
|-------------|----------|------|
| 400 | `INSUFFICIENT_BALANCE` | 잔액 부족 |
| 400 | `INVALID_ADDRESS` | 유효하지 않은 지갑 주소 |
| 400 | `SENDER_NOT_KYC_REGISTERED` | 송신자 KYC 미등록 |
| 400 | `RECEIVER_NOT_KYC_REGISTERED` | 수신자 KYC 미등록 |
| 400 | `TOKENS_LOCKED` | 토큰이 잠금 상태 |
| 403 | `NOT_OPERATOR` | Operator 권한 없음 |
| 404 | `TOKEN_NOT_FOUND` | 토큰이 존재하지 않음 |

### 전송 불가 사유 코드

| 코드 | 설명 |
|------|------|
| `INSUFFICIENT_BALANCE` | 잔액 부족 |
| `SENDER_NOT_KYC_REGISTERED` | 송신자 KYC 미등록 |
| `RECEIVER_NOT_KYC_REGISTERED` | 수신자 KYC 미등록 |
| `TOKENS_LOCKED` | 토큰 잠금 상태 |
| `SAME_ADDRESS` | 송신자와 수신자 동일 |
