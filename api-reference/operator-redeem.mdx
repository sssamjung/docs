---
title: 'Redeem API'
description: '토큰 환수(소각) 트랜잭션 데이터 생성'
---

# Redeem API

Redeem API는 발행된 토큰을 환수(소각)하기 위한 트랜잭션 데이터를 생성합니다. **Operator** 권한이 필요합니다.

<Warning>
  환수된 토큰은 복구할 수 없습니다. 신중하게 실행하세요.
</Warning>

---

## 환수 트랜잭션 데이터 생성

토큰 환수를 위한 트랜잭션 데이터를 생성합니다.

### Request

```bash
POST /main/v1/redeem/tx/data
```

### Body Parameters

<ParamField body="tokenSymbol" type="string" required>
  토큰 심볼 (예: `PULSE-ST-001`)
</ParamField>

<ParamField body="partition" type="string" required>
  파티션 ID
</ParamField>

<ParamField body="holder" type="string" required>
  환수 대상 지갑 주소
</ParamField>

<ParamField body="amount" type="number" required>
  환수 수량
</ParamField>

<ParamField body="data" type="string">
  추가 데이터 (환수 사유 등)
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X POST "https://api.stopulse.co.kr/main/v1/redeem/tx/data" \
  -H "Authorization: Bearer {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "tokenSymbol": "PULSE-ST-001",
    "partition": "0x0000000000000000000000000000000000000000000000000000000000000001",
    "holder": "0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73",
    "amount": 100,
    "data": ""
  }'
```

```javascript JavaScript
const response = await fetch(
  'https://api.stopulse.co.kr/main/v1/redeem/tx/data',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer {access_token}',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      tokenSymbol: 'PULSE-ST-001',
      partition: '0x0000000000000000000000000000000000000000000000000000000000000001',
      holder: '0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73',
      amount: 100,
      data: ''
    })
  }
);
```

```python Python
import requests

url = "https://api.stopulse.co.kr/main/v1/redeem/tx/data"
headers = {
    "Authorization": "Bearer {access_token}",
    "Content-Type": "application/json"
}
data = {
    "tokenSymbol": "PULSE-ST-001",
    "partition": "0x0000000000000000000000000000000000000000000000000000000000000001",
    "holder": "0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73",
    "amount": 100,
    "data": ""
}

response = requests.post(url, headers=headers, json=data)
```

</CodeGroup>

### Response

```json 200
{
  "to": "0xContractAddress...",
  "data": "0xEncodedTransactionData...",
  "gas": "150000"
}
```

<Note>
  반환된 트랜잭션 데이터는 서명 후 `/transaction/send` API로 전송해야 합니다.
</Note>

---

## 토큰 환수 실행 (Issuer)

**Issuer** 권한으로 직접 토큰을 환수합니다.

### Request

```bash
POST /main/v1/tokens/{tokenSymbol}/redeem
```

<ParamField path="tokenSymbol" type="string" required>
  토큰 심볼
</ParamField>

### Body Parameters

<ParamField body="holder" type="string" required>
  환수 대상 지갑 주소
</ParamField>

<ParamField body="partitionName" type="string" required>
  파티션 이름 (예: `초기`, `락업`)
</ParamField>

<ParamField body="amount" type="number" required>
  환수 수량
</ParamField>

<ParamField body="data" type="string">
  추가 데이터
</ParamField>

### Example

```bash cURL
curl -X POST "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/redeem" \
  -H "Authorization: Bearer {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "holder": "0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73",
    "partitionName": "초기",
    "amount": 100,
    "data": " "
  }'
```

### Response

```json 200
{
  "transactionHash": "0xdef456...",
  "requestId": "REDEEM:789012ab-..."
}
```

---

## 환수 플로우

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            토큰 환수 플로우                                   │
│                                                                             │
│  ① 트랜잭션 생성          ② 서명                ③ 트랜잭션 전송             │
│  ┌───────────────┐     ┌───────────────┐     ┌───────────────┐            │
│  │ /redeem/      │────▶│     Sign      │────▶│ /transaction  │            │
│  │ tx/data       │     │   (Client)    │     │    /send      │            │
│  └───────────────┘     └───────────────┘     └───────────────┘            │
│                                                                             │
│  또는 Issuer 권한으로 직접 실행                                             │
│  ┌───────────────────────────────────────────┐                             │
│  │ /tokens/{tokenSymbol}/redeem              │                             │
│  └───────────────────────────────────────────┘                             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 에러 응답

| HTTP Status | 에러 코드 | 설명 |
|-------------|----------|------|
| 400 | `INSUFFICIENT_BALANCE` | 환수 수량이 잔액 초과 |
| 400 | `INVALID_ADDRESS` | 유효하지 않은 지갑 주소 |
| 403 | `NOT_OPERATOR` | Operator 권한 없음 |
| 403 | `NOT_ISSUER` | Issuer 권한 없음 |
| 404 | `TOKEN_NOT_FOUND` | 토큰이 존재하지 않음 |
| 404 | `PARTITION_NOT_FOUND` | 파티션이 존재하지 않음 |
