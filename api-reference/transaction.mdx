---
title: 'Transaction API'
description: '트랜잭션 조회 및 상태 확인'
---

# Transaction API

Transaction API는 블록체인 트랜잭션의 상태 조회 및 이력 확인 기능을 제공합니다.

## 트랜잭션 상태

| 상태 | 설명 |
|------|------|
| `pending` | 트랜잭션이 블록에 포함되기 전 |
| `confirmed` | 블록에 포함되어 확정됨 |
| `failed` | 트랜잭션 실행 실패 |

<Note>
  Pulse 네트워크는 QBFT 합의를 사용하므로, 블록 확정 후 되돌림(reorg)이 발생하지 않습니다.
</Note>

---

## 트랜잭션 상태 조회

트랜잭션 해시로 상태를 조회합니다.

### Request

```bash
GET /main/v1/transactions/{transactionHash}
```

<ParamField path="transactionHash" type="string" required>
  트랜잭션 해시 (예: `0xabc123...`)
</ParamField>

### Example

<CodeGroup>

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/transactions/0xabc123def456..." \
  -H "Authorization: Bearer {access_token}"
```

```javascript JavaScript
const txHash = '0xabc123def456...';
const response = await fetch(
  `https://api.stopulse.co.kr/main/v1/transactions/${txHash}`,
  {
    headers: { 'Authorization': 'Bearer {access_token}' }
  }
);
const txInfo = await response.json();
console.log(txInfo.status); // 'confirmed'
```

```python Python
import requests

tx_hash = "0xabc123def456..."
url = f"https://api.stopulse.co.kr/main/v1/transactions/{tx_hash}"
headers = {"Authorization": "Bearer {access_token}"}

response = requests.get(url, headers=headers)
print(response.json())
```

</CodeGroup>

### Response

```json 200
{
  "transactionHash": "0xabc123def456...",
  "status": "confirmed",
  "blockNumber": 12345678,
  "blockHash": "0xblock...",
  "timestamp": "2024-01-15T10:30:00Z",
  "from": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "to": "0x734c49630caC28EaaC33e9722268e64cA80AbcFd",
  "type": "transfer",
  "token": "PULSE-ST-001",
  "value": "100",
  "gasUsed": "21000"
}
```

실패한 트랜잭션:

```json 200
{
  "transactionHash": "0xfailed...",
  "status": "failed",
  "blockNumber": 12345679,
  "timestamp": "2024-01-15T10:31:00Z",
  "error": {
    "code": "INSUFFICIENT_BALANCE",
    "message": "Sender does not have enough tokens"
  }
}
```

---

## Request ID로 조회

API 요청 시 반환된 requestId로 트랜잭션을 조회합니다.

### Request

```bash
GET /main/v1/requests/{requestId}
```

<ParamField path="requestId" type="string" required>
  요청 ID (예: `req-123456`)
</ParamField>

### Example

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/requests/req-123456" \
  -H "Authorization: Bearer {access_token}"
```

### Response

```json 200
{
  "requestId": "req-123456",
  "transactionHash": "0xabc123def456...",
  "status": "confirmed",
  "type": "transfer",
  "createdAt": "2024-01-15T10:29:55Z",
  "confirmedAt": "2024-01-15T10:30:00Z"
}
```

---

## 토큰 트랜잭션 이력 조회

특정 토큰의 트랜잭션 이력을 조회합니다.

### Request

```bash
GET /main/v1/tokens/{token}/transactions
```

### Query Parameters

<ParamField query="type" type="string">
  트랜잭션 유형 필터 (`issue` | `transfer` | `redeem` | `swap` | `lock` | `unlock`)
</ParamField>

<ParamField query="from" type="string">
  송신자 주소 필터
</ParamField>

<ParamField query="to" type="string">
  수신자 주소 필터
</ParamField>

<ParamField query="startDate" type="string">
  시작일 (ISO 8601)
</ParamField>

<ParamField query="endDate" type="string">
  종료일 (ISO 8601)
</ParamField>

<ParamField query="page" type="number">
  페이지 번호 (기본값: 1)
</ParamField>

<ParamField query="limit" type="number">
  페이지당 항목 수 (기본값: 50)
</ParamField>

### Example

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/transactions?type=transfer&limit=10" \
  -H "Authorization: Bearer {access_token}"
```

### Response

```json 200
{
  "token": "PULSE-ST-001",
  "transactions": [
    {
      "transactionHash": "0xabc123...",
      "type": "transfer",
      "from": "0xd14f...",
      "to": "0x734c...",
      "value": "100",
      "timestamp": "2024-01-15T10:30:00Z",
      "status": "confirmed"
    },
    {
      "transactionHash": "0xdef456...",
      "type": "transfer",
      "from": "0x734c...",
      "to": "0xa13F...",
      "value": "50",
      "timestamp": "2024-01-15T09:00:00Z",
      "status": "confirmed"
    }
  ],
  "page": 1,
  "totalPages": 5,
  "totalCount": 48
}
```

---

## 주소별 트랜잭션 이력 조회

특정 주소의 트랜잭션 이력을 조회합니다.

### Request

```bash
GET /main/v1/tokens/{token}/holders/{holder}/transactions
```

### Example

```bash cURL
curl -X GET "https://api.stopulse.co.kr/main/v1/tokens/PULSE-ST-001/holders/0xd14f.../transactions?limit=20" \
  -H "Authorization: Bearer {access_token}"
```

### Response

```json 200
{
  "token": "PULSE-ST-001",
  "holder": "0xd14f723e859ec4f3edee57bf78ceb7c81de08dfb",
  "transactions": [
    {
      "transactionHash": "0xabc123...",
      "type": "transfer",
      "direction": "out",
      "counterparty": "0x734c...",
      "value": "100",
      "timestamp": "2024-01-15T10:30:00Z"
    },
    {
      "transactionHash": "0xghi789...",
      "type": "issue",
      "direction": "in",
      "counterparty": "0xa13F...",
      "value": "1000",
      "timestamp": "2024-01-10T00:00:00Z"
    }
  ]
}
```

---

## 트랜잭션 유형

| 유형 | 설명 |
|------|------|
| `issue` | 토큰 발행 |
| `transfer` | 토큰 전송 |
| `redeem` | 토큰 환수 |
| `swap` | ST/DT 스왑 |
| `lock` | 토큰 잠금 |
| `unlock` | 토큰 잠금 해제 |
| `kyc_register` | KYC 등록 |
| `kyc_remove` | KYC 해제 |

---

## Block Explorer 연동

트랜잭션 상세 정보는 Block Explorer(Blockscout)에서도 확인 가능합니다.

```javascript
// Block Explorer URL 생성
const explorerUrl = `https://explorer.stopulse.co.kr/tx/${transactionHash}`;
```

<Info>
  Block Explorer는 웹 브라우저에서 직접 트랜잭션, 블록, 주소를 조회할 수 있는 도구입니다.
</Info>

---

## 에러 응답

| HTTP Status | 에러 코드 | 설명 |
|-------------|----------|------|
| 400 | `INVALID_HASH` | 유효하지 않은 트랜잭션 해시 |
| 404 | `TRANSACTION_NOT_FOUND` | 트랜잭션을 찾을 수 없음 |
| 404 | `REQUEST_NOT_FOUND` | 요청 ID를 찾을 수 없음 |
