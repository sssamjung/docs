---
title: '인프라 아키텍처'
description: 'Pulse 클라우드 인프라 구조'
---

# Project Pulse 인프라 아키텍처

Pulse는 AWS 기반의 엔터프라이즈급 클라우드 인프라 위에서 운영됩니다. 금융 서비스에 요구되는 높은 수준의 가용성, 확장성, 보안을 충족하도록 설계되었습니다.

## 아키텍처 개요

```
┌─────────────────────────────────────────────────────────────────┐
│                        AWS Cloud                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │                      Region (Seoul)                       │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │  │
│  │  │    AZ-a     │  │    AZ-b     │  │    AZ-c     │       │  │
│  │  │  ┌───────┐  │  │  ┌───────┐  │  │  ┌───────┐  │       │  │
│  │  │  │ Pulse │  │  │  │ Pulse │  │  │  │ Aurora│  │       │  │
│  │  │  │  Node │  │  │  │  Node │  │  │  │  DB   │  │       │  │
│  │  │  └───────┘  │  │  └───────┘  │  │  └───────┘  │       │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │  │
│  │                                                           │  │
│  │              ┌─────────────────────┐                      │  │
│  │              │   Load Balancer     │                      │  │
│  │              └─────────────────────┘                      │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

## 핵심 설계 원칙

<CardGroup cols={2}>
  <Card title="고가용성" icon="shield-check">
    99.99% 가용성 목표 (하루 8.64초 미만 장애시간)
  </Card>
  <Card title="수평 확장" icon="arrows-left-right">
    Scale Out 방식으로 트래픽 증가에 대응
  </Card>
  <Card title="단일 장애점 제거" icon="circle-nodes">
    Multi-AZ 구성으로 SPOF 방지
  </Card>
  <Card title="자동 복구" icon="rotate">
    장애 발생 시 자동 Failover
  </Card>
</CardGroup>

## 규모 확장성 (Scalability)

### Scale Out vs Scale Up

| 방식 | 설명 | Pulse 적용 |
|------|------|-----------|
| **Scale Up** | 단일 서버 성능 향상 | ❌ 물리적 한계 존재 |
| **Scale Out** | 서버 수 증가 | ✅ 채택 |

Pulse는 **Scale Out** 방식을 채택하여 다음과 같은 장점을 확보했습니다:
- 하드웨어 물리적 한계 극복
- 비용 효율적인 확장
- 단일 장애점 제거
- 자동 복구(Failover) 지원

### Load Balancer

Application Load Balancer(ALB)를 적용하여 트래픽을 분산합니다:

```
                    ┌─────────────────┐
       Traffic ────▶│       ALB       │
                    └────────┬────────┘
                             │
            ┌────────────────┼────────────────┐
            ▼                ▼                ▼
     ┌──────────┐     ┌──────────┐     ┌──────────┐
     │ Instance │     │ Instance │     │ Instance │
     │   AZ-a   │     │   AZ-b   │     │   AZ-c   │
     └──────────┘     └──────────┘     └──────────┘
```

**ALB 특징:**
- L7 계층에서 HTTP/HTTPS 트래픽 처리
- Multi-AZ 전체 관할
- 자동 Health Check

### Auto Scaling

CPU, 메모리, 네트워크 트래픽 등의 메트릭을 모니터링하여 서버 규모를 자동 조절합니다.

```
┌─────────────────────────────────────────────────┐
│              Auto Scaling Group                  │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐          │
│  │   Pod   │  │   Pod   │  │   Pod   │  ← 자동  │
│  └─────────┘  └─────────┘  └─────────┘    추가  │
└─────────────────────────────────────────────────┘
```

## 데이터베이스 구조

### Aurora DB

Pulse는 AWS Aurora DB를 사용하여 데이터베이스 고가용성과 성능을 확보합니다.

**Master/Slave 구조:**

| 역할 | 담당 연산 |
|------|----------|
| **Master (Writer)** | INSERT, UPDATE, DELETE |
| **Slave (Reader)** | SELECT |

```
┌─────────────┐         ┌─────────────┐
│   Master    │ ──────▶ │   Slave 1   │ (읽기)
│  (Writer)   │         └─────────────┘
│             │         ┌─────────────┐
│             │ ──────▶ │   Slave 2   │ (읽기)
└─────────────┘         └─────────────┘
```

**Aurora vs MySQL:**
- 4/6 쿼럼 방식으로 데이터 저장
- FRM + Redo Log만 전송 (Network Bandwidth 최소화)
- Instance와 Storage 영역 분리
- 빠른 읽기 확장성

## Disaster Recovery (DR)

### 가용율에 따른 장애시간

| 가용율 | 하루당 장애시간 | 연간 장애시간 |
|--------|----------------|--------------|
| 99% | 14.40분 | 3.65일 |
| 99.9% | 1.44분 | 8.77시간 |
| **99.99%** | **8.64초** | **52.60분** |
| 99.999% | 864ms | 5.26분 |

Pulse는 **99.99% 가용성**을 목표로 설계되었습니다.

### Multi Available Zone

서울 리전 내 **4개 가용영역**을 사용하여 데이터 센터 장애에도 서비스가 지속됩니다:

```
┌────────────────────────────────────────────────┐
│               Seoul Region                      │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐  │
│  │  AZ-a  │ │  AZ-b  │ │  AZ-c  │ │  AZ-d  │  │
│  │   ✓    │ │   ✓    │ │   ✓    │ │   ✓    │  │
│  └────────┘ └────────┘ └────────┘ └────────┘  │
└────────────────────────────────────────────────┘
```

### 장애 조치 (Failover)

Aurora DB 장애 발생 시 자동으로 권한이 이전됩니다:

1. Writer 인스턴스 장애 감지
2. Reader 인스턴스 중 하나가 Writer로 승격
3. 기존 Writer는 Reader로 강등 또는 삭제
4. 서비스 연속성 유지

## Latency 최적화

### Redis Cache

자주 참조되는 데이터를 메모리에 캐싱하여 응답 속도를 개선합니다:

```
┌─────────┐       ┌─────────┐       ┌─────────┐
│  Client │ ────▶ │  Redis  │ ────▶ │   DB    │
└─────────┘       │ (Cache) │       └─────────┘
                  └─────────┘
                     ▲
                     │ 캐시 Hit 시
                     │ DB 조회 생략
                     ▼
              ┌─────────────┐
              │ Fast Return │
              └─────────────┘
```

### Write Transaction 비동기 처리

Kafka와 Redis를 조합하여 Write Transaction의 순서 보장과 빠른 응답을 달성합니다:

1. Client → API Gateway → SDK
2. SDK → Kafka (Message Queue)
3. Nonce Manager → RPC Node → Blockchain
4. TX Manager → Redis (TXID 저장)
5. TX Publisher → Client (체결 완료 전파)

## Monitoring

### Prometheus + Grafana

Kubernetes 환경에서 Prometheus와 Grafana를 사용하여 인프라를 모니터링합니다:

- **Prometheus**: 메트릭 수집, 알림
- **Grafana**: 데이터 시각화

**모니터링 대상:**
- Validator Node Pod
- RPC Node Pod
- 네트워크 트래픽
- 시스템 리소스 (CPU, Memory, Disk)

<Note>
  인프라 참여사에게는 Grafana 대시보드 접근 권한이 제공됩니다.
</Note>
